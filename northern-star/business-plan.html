<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>The Anti-Consultant: Interactive Business Plan</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code&display=swap"
			rel="stylesheet"
		/>
		<style>
			:root {
				--primary: #d4db3e;
				--secondary: #def0fa;
				--accent: #dcebf3;
				--background: #f8f9fa; /* Lighter grey for background */
				--text-dark: #212529;
				--text-light: #6c757d;
				--white: #ffffff;
				--border-color: #e9ecef;
			}
			body {
				font-family: "Inter", sans-serif;
				background-color: var(--background);
				color: var(--text-dark);
				-webkit-font-smoothing: antialiased;
				-moz-osx-font-smoothing: grayscale;
			}
			h1,
			h2,
			h3,
			h4 {
				font-family: "Inter", sans-serif;
				font-weight: 700;
				letter-spacing: -0.025em;
			}
			h1 {
				font-size: 2.75rem;
				line-height: 3.25rem;
				margin-bottom: 2rem;
			}
			h2 {
				font-size: 2.25rem;
				line-height: 2.75rem;
				margin-top: 4rem;
				margin-bottom: 2rem;
				border-bottom: 3px solid var(--primary);
				padding-bottom: 0.75rem;
			}
			h3 {
				font-size: 1.5rem;
				line-height: 2rem;
				margin-top: 2.5rem;
				margin-bottom: 1.25rem;
				font-weight: 600;
			}
			h4 {
				font-size: 1.125rem;
				line-height: 1.75rem;
				margin-top: 2rem;
				margin-bottom: 1rem;
				font-weight: 600;
				text-transform: uppercase;
				color: var(--text-light);
			}
			p,
			li {
				font-size: 1.05rem;
				line-height: 1.8;
				margin-bottom: 1.25rem;
				color: var(--text-dark);
			}
			ul {
				list-style: none;
				padding-left: 0;
			}
			ul li {
				padding-left: 1.75rem;
				position: relative;
			}
			ul li::before {
				content: "✓";
				color: var(--primary);
				font-weight: 600;
				position: absolute;
				left: 0;
				top: 5px;
			}
			code {
				font-family: "Fira Code", monospace;
				background-color: var(--accent);
				color: #3d5a80;
				padding: 0.2em 0.4em;
				margin: 0;
				font-size: 85%;
				border-radius: 6px;
			}
			pre {
				font-family: "Fira Code", monospace;
				background-color: #011627; /* A nice dark theme for code */
				color: #d6deeb;
				padding: 1.5rem;
				border-radius: 0.5rem;
				overflow-x: auto;
				white-space: pre-wrap;
				word-wrap: break-word;
				font-size: 0.9rem;
				line-height: 1.6;
			}
			blockquote {
				border-left: 4px solid var(--primary);
				padding-left: 1.5rem;
				margin: 2rem 0;
				font-style: italic;
				color: var(--text-light);
				font-size: 1.1rem;
			}
			.sidebar {
				background: linear-gradient(
					160deg,
					var(--secondary) 0%,
					var(--accent) 100%
				);
				animation: gradient-animation 15s ease infinite;
				background-size: 200% 200%;
				transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
				display: flex;
				flex-direction: column;
				height: 100vh; /* Full height */
			}
			@keyframes gradient-animation {
				0% {
					background-position: 0% 50%;
				}
				50% {
					background-position: 100% 50%;
				}
				100% {
					background-position: 0% 50%;
				}
			}
			#table-of-contents {
				flex-grow: 1;
				overflow-y: auto; /* Enable scrolling */
			}
			.sidebar a {
				color: var(--text-dark);
				border-left: 4px solid transparent;
				transition: all 0.2s ease-in-out;
				padding: 0.75rem 1rem;
				border-radius: 0.375rem;
				font-weight: 500;
				display: block; /* Ensure links take full width */
			}
			.sidebar a:hover {
				background-color: rgba(255, 255, 255, 0.5);
				transform: translateX(4px);
			}
			.sidebar a.active {
				background-color: var(--white);
				border-left-color: var(--primary);
				color: var(--text-dark);
				font-weight: 700;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
				transform: translateX(4px);
			}
			.logo {
				font-weight: 700;
				font-size: 1.375rem;
				flex-shrink: 0; /* Prevent logo from shrinking */
			}
			.logo-bridge {
				width: 36px;
				height: 36px;
			}
			.content-section {
				scroll-margin-top: 2rem;
			}
			.interactive-checklist label {
				display: flex;
				align-items: center;
				cursor: pointer;
				padding: 0.75rem 1rem;
				border-radius: 0.5rem;
				transition: background-color 0.2s;
				border: 1px solid var(--border-color);
				background-color: var(--white);
				margin-bottom: 0.5rem;
			}
			.interactive-checklist label:hover {
				background-color: #f1f3f5;
			}
			.interactive-checklist input[type="checkbox"] {
				accent-color: var(--primary);
				width: 1.25rem;
				height: 1.25rem;
				margin-right: 1rem;
			}
			.interactive-checklist input[type="checkbox"]:checked + span {
				text-decoration: line-through;
				color: var(--text-light);
			}
			.scorecard-input {
				border: 2px solid var(--border-color);
				border-radius: 0.5rem;
				padding: 0.5rem;
				width: 100px;
				text-align: center;
				font-weight: 600;
				transition: all 0.2s ease;
			}
			.scorecard-input:focus {
				outline: none;
				border-color: var(--primary);
				box-shadow: 0 0 0 3px rgba(212, 219, 62, 0.3);
			}
			#main-content {
				animation: fadeIn 0.8s ease-in-out;
			}
			@keyframes fadeIn {
				from {
					opacity: 0;
					transform: translateY(10px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}
		</style>
	</head>
	<body class="bg-background">
		<div class="relative min-h-screen lg:flex">
			<!-- Sidebar -->
			<aside
				id="sidebar"
				class="sidebar w-72 p-6 fixed inset-y-0 left-0 transform -translate-x-full lg:translate-x-0 z-30 lg:z-auto"
			>
				<div class="logo flex items-center gap-3 mb-10">
					<svg
						class="logo-bridge"
						viewBox="0 0 100 100"
						xmlns="http://www.w3.org/2000/svg"
					>
						<path
							d="M10 50 C 20 20, 80 20, 90 50"
							stroke="#d4db3e"
							stroke-width="10"
							fill="none"
							stroke-linecap="round"
						/>
						<path
							d="M15 50 L 15 85"
							stroke="#d4db3e"
							stroke-width="10"
							fill="none"
							stroke-linecap="round"
						/>
						<path
							d="M85 50 L 85 85"
							stroke="#d4db3e"
							stroke-width="10"
							fill="none"
							stroke-linecap="round"
						/>
						<rect x="5" y="80" width="90" height="15" fill="#dcebf3" rx="4" />
						<circle cx="25" cy="70" r="8" fill="#3d5a80" />
						<path d="M70 65 L 80 75 L 70 85 Z" fill="#3d5a80" />
					</svg>
					<span>The Anti-Consultant</span>
				</div>
				<nav id="table-of-contents" class="flex flex-col space-y-2"></nav>
			</aside>

			<!-- Main Content -->
			<main id="main-content" class="flex-1 lg:ml-72 p-6 md:p-12">
				<div id="business-plan-content" class="max-w-4xl mx-auto">
					<!-- Content will be dynamically generated -->
				</div>
			</main>

			<!-- Mobile Menu Button -->
			<button
				id="mobile-menu-button"
				class="lg:hidden fixed top-4 left-4 p-2 rounded-full text-white z-40 bg-gray-800 shadow-lg"
			>
				<svg
					id="menu-open-icon"
					class="h-6 w-6"
					fill="none"
					viewBox="0 0 24 24"
					stroke="currentColor"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						stroke-width="2"
						d="M4 6h16M4 12h16m-7 6h7"
					/>
				</svg>
				<svg
					id="menu-close-icon"
					class="h-6 w-6 hidden"
					fill="none"
					viewBox="0 0 24 24"
					stroke="currentColor"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						stroke-width="2"
						d="M6 18L18 6M6 6l12 12"
					/>
				</svg>
			</button>
		</div>

		<script>
			document.addEventListener("DOMContentLoaded", function () {
				// --- DATA STORE ---
				const businessPlanMarkdown = `
# The Anti-Consultant: Comprehensive Business Plan & Operations Manual

*AI Solutions Architecture • IT-Business Bridge Building • Organizational Transformation*

---

## 1. Philosophy & Manifesto

### Core Philosophy: The Liberation Protocol
**v_Buddha's Foundation**: *"Organizations suffer from the friction between business needs and technical constraints. We liberate them through understanding and collaboration."*
**v_Jobs' Refinement**: *"Simplicity is the ultimate sophistication. We don't add complexity—we remove the barriers between ideas and implementation."*
**v_Machiavelli's Pragmatism**: *"True power comes not from dependency but from capability. We make our clients powerful enough to no longer need us."*

### The Anti-Consultant Manifesto
> **"We Stand Against Consultant Dependency"**
> While traditional consultants sell time and create dependency, we sell capability and create independence. We believe every organization deserves internal AI expertise, not external AI presentations.
> **"We Bridge the IT-Business Divide"**
> The greatest inefficiency in modern business is the friction between business vision and technical execution. We teach business people to speak IT's language and IT people to understand business impact.
> **"We Deliver Solutions, Not Projects"**
> Projects end. Solutions endure. We leave behind working code, capable people, and sustainable processes—not binders of recommendations.
> **"We Build Capabilities That Compound"**
> Every solution we create becomes a template. Every person we train becomes a trainer. Every problem we solve makes the next problem easier to solve.

### Mission Statement
*"To transform organizational capability by bridging the IT-business divide through collaborative AI solution architecture, creating a new generation of internal experts who can solve tomorrow's problems with today's tools."*

---

## 2. Risk Analysis & Mitigation Framework
*v_Kahneman stands first: "You're suffering from optimism bias. Where's your pre-mortem? Let me paint the failures you're not seeing:"*

### The Risk Matrix
*v_Machiavelli details the threats:*

#### Existential Risks
- **AI Platform Dependency**: OpenAI changes pricing 10x overnight
- **Regulatory Tsunami**: AI regulations make your service illegal
- **Tech Giant Entry**: Google launches free competing service
- **Mitigation**: Multi-model redundancy, regulatory monitoring, niche specialization

#### Operational Risks
*v_Churchill: "What happens when your AI hallucinates and costs a client $100K?"*
- Professional liability insurance (E&O)
- Human review protocols for critical decisions
- Clear disclaimers and service boundaries
- Kill switches and rollback procedures

#### Reputational Risks
*v_Gandhi: "One public AI failure could destroy years of trust"*
- Crisis communication templates ready
- Client data backup and recovery systems
- Transparent incident reporting process

---

## 3. Financial Architecture & Controls
*v_Bezos slams the table: "Where are your unit economics? Show me the path to cash flow positive!"*

### Financial Control Systems
#### Burn Rate Management
- **Personal expense**: $X/month
- **AI tools budget**: $2,000/month initial
- **Emergency fund**: 6 months runway minimum
*v_Cuban: "If you can't explain your burn rate on a napkin, you're already dead"*

#### Revenue Recognition Framework
- Upfront payment requirements (Net 15 maximum)
- Milestone-based billing for projects
- Recurring revenue prioritization (target 80% ARR)
*v_Akio: "Cash flow is oxygen. Without it, nothing else matters"*

### Pricing Evolution Model
- **Stage 1 (Month 1-3): Price to Learn**
  - $2,000-5,000/month per client
  - Trade discount for case studies
- **Stage 2 (Month 4-6): Price to Grow**
  - $5,000-10,000/month per client
  - Value-based pricing introduced
- **Stage 3 (Month 7+): Price to Profit**
  - $10,000-25,000/month per client
  - Performance bonuses included

---

## 4. Legal Infrastructure & IP Strategy
*v_Machiavelli warns darkly: "Your first successful client becomes your first competitor when they reverse-engineer your methods."*

### Legal Architecture
#### Entity Structure
*v_Cuban: "LLC for simplicity NOW, convert to C-Corp only if you raise money"*
- Separate IP holding entity consideration
- International structure for tax optimization (after $500K revenue)

#### Contract Arsenal
- Master Service Agreement (MSA) with clear AI disclaimers
- Non-disclosure agreements (mutual)
- Non-compete clauses for delivered solutions
- IP assignment clarity (you retain AI methods, they get outputs)
*v_Ury: "Every contract is a prenup. Plan for the divorce before the marriage"*

### Intellectual Property Moat
- Document all proprietary prompts and workflows
- Consider provisional patents for novel AI applications
- Trademark your methodology names
*v_Luckey: "Your prompts are your source code. Guard them accordingly"*

---

## 5. Customer Success & Retention Engineering
*v_Nadella interjects: "Growth mindset means obsessing about customer success, not just acquisition."*

### The Retention Machine
#### Onboarding Protocol (First 30 Days)
- **Day 1**: Quick win delivery (something visible)
- **Day 7**: First measurable ROI shown
- **Day 14**: Executive dashboard live
- **Day 30**: Success review with renewal discussion
*v_Oprah: "Make them FEEL the transformation, not just see it"*

### Success Metrics Framework
#### Leading Indicators:
- Weekly usage of AI tools
- Support tickets resolved <24 hours
- Feature adoption rate
#### Lagging Indicators:
- Cost savings achieved
- Time saved (hours/week)
- NPS score >70
- Renewal rate >90%

### Expansion Strategy
*v_Bezos: "Your second sale to an existing customer costs 10% of acquiring a new one"*
- Land with efficiency, expand to strategy
- Department-by-department conquest
- Client becomes case study evangelist

---

## 6. Technology Infrastructure & Security
*v_Brin raises critical concerns: "Your tech stack is your skeleton. Build it wrong, and you'll be paralyzed at scale."*

### Technical Architecture
#### Security Framework
- SOC 2 compliance roadmap (by Month 6)
- Client data encryption at rest and in transit
- API key management system (HashiCorp Vault)
- Regular security audits
*v_SunTzu: "Security is not a feature—it's the foundation"*

#### Scalability Design
- Microservices architecture from Day 1
- API-first development
- Automated testing pipeline
- Version control for all prompts
*v_Luckey: "Build for 1000 clients even if you have 1"*

#### Data Strategy
- Client data isolation protocols
- GDPR/CCPA compliance built-in
- Data retention policies
- Right to deletion workflows
*v_Buddha: "With great data comes great responsibility"*

---

## 7. Metrics & KPI Dashboard
*v_Kahneman demands rigor: "What gets measured gets manipulated. Measure the right things."*

### The Success Scorecard
#### Weekly Metrics (Monday Review):
- Pipeline velocity (leads → clients)
- Client health scores
- AI cost per client
- Support ticket resolution time

#### Monthly Metrics (Board Review):
- **MRR growth rate** (target: 20% M/M)
- **CAC** (Customer Acquisition Cost)
- **LTV:CAC ratio** (target: >3:1)
- **Gross margin** (target: >80%)
- **Churn rate** (target: <5%)

#### Quarterly Metrics (Strategy Review):
- Market share in niche
- Product-market fit score
- Team productivity metrics
- Innovation pipeline value

---

## 8. Crisis Management Playbook
*v_Churchill speaks gravely: "In war, plans are useless, but planning is indispensable."*

### Crisis Response Protocols
#### AI Failure Crisis
- Immediate client notification template
- Root cause analysis process
- Compensation framework
- Public response strategy

#### Client Loss Crisis
- Exit interview protocol
- Win-back campaign design
- Referral request despite departure
- Learning documentation

#### Competition Crisis
*v_Patton: "When a big competitor enters, attack where they're weak—speed and personalization"*
- Differentiation amplification
- Client lock-in acceleration
- David vs. Goliath PR strategy

---

## 9. Funding & Capital Strategy
*v_Cuban cuts in: "Bootstrap until it hurts, then bootstrap some more. Every dollar of investment is ten dollars of obligation."*

### Capital Evolution Path
#### Phase 1 (Month 1-6): Pure Bootstrap
- Personal savings only
- Revenue reinvestment
- Credit card float management
- Target: Cash flow positive by Month 4

#### Phase 2 (Month 7-12): Revenue-Fueled Growth
- Consider revenue-based financing
- SBA loans for equipment
- Client prepayment incentives
- Target: $500K ARR, no external capital

#### Phase 3 (Year 2+): Strategic Capital (Only If Needed)
- Angel investment for specific expansion
- Strategic partner investment
- Venture capital (only for 100x opportunity)
*v_Tan: "Raise money only to pour gasoline on a fire that's already burning"*

---

## 10. Exit Strategy & Optionality
*v_Machiavelli speaks last: "Begin with the end in mind. Every business is eventually sold, merged, or buried."*

### Exit Pathways
#### Lifestyle Business (Most Likely)
- Optimize for cash flow and freedom
- Build to $2-5M revenue, minimal overhead
- Semi-automate, work 20 hours/week
*v_Buddha: "Sometimes the best exit is not to exit"*

#### Strategic Acquisition (Years 3-5)
- Build unique IP and client base
- Target acquirers: Major consultancies, SI partners
- Valuation: 3-5x ARR
*v_Bezos: "Make yourself so valuable that buying you is cheaper than competing"*

#### Platform Evolution (Moonshot)
- Transform from service to SaaS
- Productize your expertise
- Venture scale opportunity
*v_Brin: "Services teach you the problem, products solve it at scale"*

---

## 11. Personal Sustainability Plan
*v_Oprah brings crucial wisdom: "You can't pour from an empty cup. Where's your personal sustainability plan?"*

### Founder Wellness Protocol
#### Time Boundaries
- No client work after 7 PM
- One full day off per week
- Quarterly rest weeks
*v_Gandhi: "Your business should serve your life, not consume it"*

#### Mental Health Framework
- Weekly AI "therapy sessions" (prompts for reflection)
- Monthly mentor meetings
- Peer founder group participation
*v_Nadella: "Burnout is not a badge of honor—it's a failure of planning"*

#### Growth Investment
- 10% of revenue to learning/tools
- Weekly experimentation time
- Annual conference attendance
*v_Obama: "The moment you stop learning, you start dying"*

---

## 12. Innovation Pipeline
*v_Jobs insists: "Cannibalize yourself before someone else does."*

### Future-Proofing Framework
#### Near-term Innovations (Next 6 Months)
- Voice-first AI interfaces
- Industry-specific AI agents
- Real-time dashboard evolution

#### Medium-term Disruptions (6-18 Months)
- Autonomous AI employees
- Predictive business alerts
- Cross-client intelligence network

#### Long-term Moonshots (18+ Months)
- Full business autopilot
- AI board member as a service
- Sector-wide transformation platform

---

## 13. Partnership & Ecosystem Strategy
*v_Reagan emphasizes relationships: "Your network is your net worth, but your partnerships are your power."*

### Strategic Alliance Framework
#### Technology Partners
- AI model providers (OpenAI, Anthropic, Google)
- Infrastructure partners (AWS, Vercel)
- Tool partners (Zapier, N8N)
- **Leverage**: Volume discounts, early access, co-marketing

#### Channel Partners
- Industry associations
- Complementary consultancies
- Software vendors needing services
*v_Ury: "Make every competitor a potential partner"*

#### Client Partners
- Turn best clients into equity partners
- Revenue share for referrals
- Co-development opportunities
*v_SunTzu: "The supreme excellence is to subdue competitors without fighting"*

---

## 14. The One-Page Scorecard
*v_Spielberg concludes: "All these plans mean nothing if you can't see the story at a glance."*
*v_Patton's Final Command: "Plans are nothing. Planning is everything. Now you have planned enough. EXECUTE! Report back in 48 hours with your first client conversation or consider yourself court-martialed from this board!"*

### Your Daily Dashboard (Print This)
#### DAILY BATTLE RHYTHM
- [ ] Morning: One sales action (email/call/post)
- [ ] Midday: One product improvement 
- [ ] Evening: One client success check

#### WEEKLY SCORECARD
**Revenue Progress**: $<input type="text" class="scorecard-input" data-scorecard-id="revenueProgress" placeholder="_____"> / $10K target
**Clients Served**: <input type="text" class="scorecard-input" data-scorecard-id="clientsServed" placeholder="_____"> / 3 target
**Pipeline Calls**: <input type="text" class="scorecard-input" data-scorecard-id="pipelineCalls" placeholder="_____"> / 10 target
**Content Created**: <input type="text" class="scorecard-input" data-scorecard-id="contentCreated" placeholder="_____"> / 2 pieces
**AI Tools Built**: <input type="text" class="scorecard-input" data-scorecard-id="aiToolsBuilt" placeholder="_____"> / 1 target

#### MONTHLY NORTH STARS
**MRR**: $<input type="text" class="scorecard-input" data-scorecard-id="mrr" placeholder="_______"> (Target: +20%)
**Clients**: <input type="text" class="scorecard-input" data-scorecard-id="clients" placeholder="_______"> (Target: +2)
**NPS**: <input type="text" class="scorecard-input" data-scorecard-id="nps" placeholder="_______"> (Target: >70)
**Margin**: <input type="text" class="scorecard-input" data-scorecard-id="margin" placeholder="_______">% (Target: >80%)

#### QUARTERLY CHECKPOINTS
- [ ] Am I solving real pain?
- [ ] Am I charging enough?
- [ ] Am I sustainable?
- [ ] Am I growing?
`;

				// --- APP INITIALIZATION ---
				function initApp() {
					const contentContainer = document.getElementById(
						"business-plan-content"
					);

					renderContent(contentContainer);
					setupNavigation();
					setupInteractivity();
					setupMobileMenu();
				}

				// --- CONTENT RENDERING ---
				function renderContent(container) {
					container.innerHTML = markdownToHtml(businessPlanMarkdown);
				}

				function markdownToHtml(md) {
					// Add a unique section for the title
					md = md.replace(
						/^#\s(.*?)\n\n/m,
						'<div class="content-section" id="title-section"><h1>$1</h1>\n\n'
					);

					return md
						.split("\n---\n") // Split into sections by horizontal rule
						.map((section) => {
							let sectionHtml = section
								.replace(/^##\s(.*?)$/gm, (match, title) => {
									const id = title
										.replace(/^\d+\.\s*/, "")
										.trim()
										.toLowerCase()
										.replace(/[^\w\s-]/g, "")
										.replace(/\s+/g, "-");
									return `<h2 class="content-section" id="${id}">${title}</h2>`;
								})
								.replace(/^###\s(.*?)$/gm, "<h3>$1</h3>")
								.replace(/^####\s(.*?)$/gm, "<h4>$1</h4>")
								.replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>")
								.replace(/\*(.*?)\*/g, "<em>$1</em>")
								.replace(/^>\s(.*?)$/gm, "<blockquote>$1</blockquote>")
								.replace(/^- \[ \]\s(.*?)$/gm, (match, item) => {
									const id = `task-${item
										.trim()
										.toLowerCase()
										.replace(/[^\w\s]/g, "")
										.replace(/\s+/g, "-")}-${Math.random()
										.toString(36)
										.substr(2, 9)}`;
									return `<div class="interactive-checklist"><label><input type="checkbox" id="${id}" data-task-id="${id}"><span>${item.trim()}</span></label></div>`;
								})
								.replace(/^- (.*?)$/gm, (match, item) => {
									if (item.startsWith("[ ]")) return match;
									return `<li>${item.trim()}</li>`;
								})
								.replace(/(<li>.*<\/li>)/gs, "<ul>$1</ul>")
								.replace(/<\/ul>\s*<ul>/g, "")
								.replace(
									/```(\w+)?\n([\s\S]*?)\n```/g,
									(match, lang, code) =>
										`<pre><code>${code
											.trim()
											.replace(/</g, "&lt;")
											.replace(/>/g, "&gt;")}</code></pre>`
								)
								.replace(/\n/g, "<br>");

							return `<div class="section-wrapper">${sectionHtml}</div>`;
						})
						.join('<hr class="my-16 border-t border-dashed border-gray-300">');
				}

				// --- NAVIGATION ---
				function setupNavigation() {
					const tocContainer = document.getElementById("table-of-contents");
					const contentContainer = document.getElementById(
						"business-plan-content"
					);
					const headings = contentContainer.querySelectorAll("h2");

					headings.forEach((h2) => {
						const link = document.createElement("a");
						link.href = `#${h2.id}`;
						// FIX: Restore the numbering by using the full text content.
						link.textContent = h2.textContent;
						link.onclick = (e) => {
							e.preventDefault();
							const targetElement = document.getElementById(h2.id);
							if (targetElement) {
								targetElement.scrollIntoView({ behavior: "smooth" });
							}
							if (window.innerWidth < 1024) {
								closeMobileMenu();
							}
						};
						tocContainer.appendChild(link);
					});

					const observer = new IntersectionObserver(
						(entries) => {
							entries.forEach((entry) => {
								const id = entry.target.getAttribute("id");
								const link = tocContainer.querySelector(`a[href="#${id}"]`);
								if (entry.isIntersecting) {
									tocContainer
										.querySelectorAll("a")
										.forEach((a) => a.classList.remove("active"));
									if (link) link.classList.add("active");
								}
							});
						},
						{ rootMargin: "-30% 0px -70% 0px" }
					);

					headings.forEach((section) => observer.observe(section));
				}

				// --- INTERACTIVITY ---
				function setupInteractivity() {
					const storageKeyPrefix = "antiConsultantPlan_v4_";

					// Checklists
					const checklists = document.querySelectorAll(
						'.interactive-checklist input[type="checkbox"]'
					);
					const checklistStorageKey = `${storageKeyPrefix}checklist`;
					const savedChecklistState =
						JSON.parse(localStorage.getItem(checklistStorageKey)) || {};

					checklists.forEach((checkbox) => {
						if (savedChecklistState[checkbox.id]) {
							checkbox.checked = true;
						}
						checkbox.addEventListener("change", () => {
							savedChecklistState[checkbox.id] = checkbox.checked;
							localStorage.setItem(
								checklistStorageKey,
								JSON.stringify(savedChecklistState)
							);
						});
					});

					// Scorecard
					const inputs = document.querySelectorAll(".scorecard-input");
					const scorecardStorageKey = `${storageKeyPrefix}scorecard`;
					const savedScorecardState =
						JSON.parse(localStorage.getItem(scorecardStorageKey)) || {};

					inputs.forEach((input) => {
						const id = input.dataset.scorecardId;
						if (savedScorecardState[id]) {
							input.value = savedScorecardState[id];
						}
						input.addEventListener("input", () => {
							savedScorecardState[id] = input.value;
							localStorage.setItem(
								scorecardStorageKey,
								JSON.stringify(savedScorecardState)
							);
						});
					});
				}

				// --- MOBILE MENU ---
				const sidebar = document.getElementById("sidebar");
				const mobileMenuButton = document.getElementById("mobile-menu-button");
				const menuOpenIcon = document.getElementById("menu-open-icon");
				const menuCloseIcon = document.getElementById("menu-close-icon");

				function openMobileMenu() {
					sidebar.classList.remove("-translate-x-full");
					menuOpenIcon.classList.add("hidden");
					menuCloseIcon.classList.remove("hidden");
				}

				function closeMobileMenu() {
					sidebar.classList.add("-translate-x-full");
					menuOpenIcon.classList.remove("hidden");
					menuCloseIcon.classList.add("hidden");
				}

				function setupMobileMenu() {
					mobileMenuButton.addEventListener("click", (e) => {
						e.stopPropagation();
						if (sidebar.classList.contains("-translate-x-full")) {
							openMobileMenu();
						} else {
							closeMobileMenu();
						}
					});
				}

				// --- RUN APP ---
				initApp();
			});
		</script>
	</body>
</html>
